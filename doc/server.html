<h1>Server configuration</h1>

<p>The default configuration file is <code>/etc/hbackup/hbackup.conf</code>,
which can be overriden with the <code>-c</code> option.</p>

<p>The following keywords are acceptable there:</p>
<table border="1" width="100%">
  <tr>
    <td><b>Keyword</b></td>
    <td><b>Description</b></td>
    <td><b>Syntax</b></td>
    <td><b>Example</b></td>
    <td><b>Default value</b></td>
  </tr>
  <tr>
    <td>db</td>
    <td>backup database path</td>
    <td><code>db "&lt;path to backup database&gt;"</code></td>
    <td><code>db "/backup"</code></td>
    <td><code>/hbackup</code></td>
  </tr>
  <tr>
    <td>client</td>
    <td>client name and subset name (subset required for clients with
    multiple backups, typically with Linux / MacOS / Windows installs under
    the same client name)</td>
    <td><code>client "&lt;client desired name&gt;"
    ["&lt;client subset&gt;"]</code></td>
    <td><code>client "montblanc"</code>
      <br><code>client "montblanc" "kubuntu"</code></td>
    <td><code></code></td>
  </tr>
  <tr>
    <td>filter</td>
    <td>filter definition</td>
    <td>See <a href="filters.html">Filters</a>.</td>
    <td>See <a href="filters.html">Filters</a>.</td>
    <td><code></code></td>
  </tr>
</table>

<h2>Client section</h2>

<p>The <i>client</i> keyword starts a new client section, and can be followed
by the keywords below:</p>

<table border="1" width="100%">
  <tr>
    <td><b>Keyword</b></td>
    <td><b>Description</b></td>
    <td><b>Occurences</b></td>
    <td><b>Syntax(es)</b></td>
    <td><b>Example(s)</b></td>
    <td><b>Default value</b></td>
  </tr>
  <tr>
    <td>protocol</td>
    <td>protocol to be used to connect to client</td>
    <td>1</td>
    <td><code>protocol "&lt;protocol&gt;"</code></td>
    <td><code>protocol "file"</code>
      <br><code>protocol "nfs"</code>
      <br><code>protocol "smb"</code></td>
    <td><code></code></td>
  </tr>
  <tr>
    <td>config</td>
    <td>path to the client's configuration file</td>
    <td>1</td>
    <td><code>config "&lt;path to file&gt;"</code></td>
    <td><code>config "C:/Backup/hbackup.list"</code>
      <br><code>config "/etc/hbackup.list"</code></td>
    <td><code></code></td>
  </tr>
  <tr>
    <td>hostname</td>
    <td>network host name
      <br>network address (e.g. IP address)</td>
    <td>0 or 1</td>
    <td><code>hostname "&lt;client host name&gt;"</code>
      <br><code>hostname "&lt;client IP address&gt;"</code></td>
    <td><code>hostname "everest"</code>
      <br><code>hostname "192.168.0.2"</code></td>
    <td><code>&lt;client name&gt;</code></td>
  </tr>
  <tr>
    <td>option</td>
    <td>file system option
      <br>file system option value</td>
    <td>any</td>
    <td><code>option "&lt;option name&gt;"</code>
      <br><code>option "&lt;option name&gt;" "&lt;value&gt;"</code></td>
    <td><code>option "nolock"</code>
      <br><code>option iocharset "utf8"</code></td>
    <td><code></code></td>
  </tr>
</table>

<p>Note: for SMB protocol users: hbackup uses CIFS, and as such will
<b>NOT</b> use the SMB protocol to resolve client names into IP addresses.</p>

<h2>Filter section</h2>

<p>The <i>filter</i> keyword starts a new filter section. Filter sections can
be anywhere. The filters defined here are available globally.</p>

<p>For information on the syntax, please refer to
<a href="filters.html">Filters</a>.</p>

<h2>Example</h2>

<p><code><pre>
# Define DB path
db /backup

# Some common filters

filter or compressed-archives
condition name_end .ace
condition name_end .bz2
condition name_end .gz
condition name_end .lzo
condition name_end .rar
condition name_end .zip
condition name_end .Z

filter or compressed-images
condition name_end .gif
condition name_end .jpg
condition name_end .png

filter or compressed
condition filter compressed-archives
condition filter compressed-images


filter or object-files
condition name_end .o
condition name_end .obj

filter or backup-files
condition name_end ~
condition name_end .bak
condition name_end .dup


filter or firefox-profile
condition path_end Firefox/Profiles

filter or opera-profile
condition path_end "Application Data/Opera/Opera/profile"

filter or browser-profiles
condition filter firefox-profile
condition filter opera-profile


filter or windows-registry
condition name NTUSER.DAT.LOG



# Client everest (local)
client file everest
config /etc/hbackup/list

# Client montblanc (Microsoft network)
client smb montblanc
option iocharset utf8
option username Administrator
option password "A6ug9^;k"
config C:/backup/hbackup.list

# Client mckinley (Unix network)
client nfs mckinley
option nolock
config /etc/hbackup/list
</pre></code></p>
