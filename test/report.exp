Report tests

Default behaviour
default level
ALERT! alert level
Error: error level
Warning: warning level
info level
report, info level

String conversions
alert
error
warning
info
verbose
debug
regression

Notifications
ALERT! console level should be alert, is alert
ALERT! console level should be verbose, is verbose
ALERT! level should be warning, is warning
ALERT! level should be debug, is debug

Verbosity level: alert
ALERT! alert level

Verbosity level: error
ALERT! alert level
Error: error level

Verbosity level: warning
ALERT! alert level
Error: error level
Warning: warning level

Verbosity level: info
default level
ALERT! alert level
Error: error level
Warning: warning level
info level
report, info level

Verbosity level: verbose
default level
ALERT! alert level
Error: error level
Warning: warning level
info level
report, info level
verbose level
verbose 0 level
 -> verbose 1 level
 --> verbose 2 level

Verbosity level: debug
default level
ALERT! alert level
Error: error level
Warning: warning level
info level
report, info level
verbose level
verbose 0 level
 -> verbose 1 level
 --> verbose 2 level
debug level
debug 0 level
 -> debug 1 level
 --> debug 2 level

Verbosity level: regression
default level
ALERT! alert level
Error: error level
Warning: warning level
info level
report, info level
verbose level
verbose 0 level
 -> verbose 1 level
 --> verbose 2 level
debug level
debug 0 level
 -> debug 1 level
 --> debug 2 level
regression level

Verbosity level: regression, restricted
default level
ALERT! alert level
Error: error level
Warning: warning level
info level
report, info level
verbose level
verbose 0 level
 -> verbose 1 level
 --> verbose 2 level
debug level
debug 0 level
 -> debug 1 level
 --> debug 2 level

Verbosity level: regression, file name, line restricted
regression level
default level
ALERT! alert level
Error: error level
Warning: warning level
info level
report, info level
verbose level
verbose 0 level
 -> verbose 1 level
 --> verbose 2 level
debug level
debug 0 level
 -> debug 1 level
 --> debug 2 level

Verbosity level: regression, file name
regression level
default level
ALERT! alert level
Error: error level
Warning: warning level
info level
report, info level
verbose level
verbose 0 level
 -> verbose 1 level
 --> verbose 2 level
debug level
debug 0 level
 -> debug 1 level
 --> debug 2 level
regression level

Line autoblanking
\r
Short line\r
A longer line\r
A huge line: If was an American science fiction magazine launched in March 1952 by Quinn Publications, owned by James L. Quinn. After a series of editors, including Paul W. Fairman, Larry T. Shaw, and Damon Knight, Quinn sold the magazine to Robert Guinn at Galaxy Publishing and in 1961 Frederik Pohl became editor. Under Pohl, If won the Hugo Award  for best professional magazine three years running from 1966 to 1968. In 1969 Guinn sold all his magazines to Universal Publishing and Distribution (UPD). The magazine was not as successful with Ejler Jakobsson as editor and circulation plummeted. In early 1974 Jim Baen took over from Jakobsson as editor, but increasing paper costs meant that UPD could no longer afford to publish both Galaxy and If. Galaxy was regarded as the senior of the two magazines, so If was merged into Galaxy after the December 1974 issue, its 175th issue overall. Over its 22 years, If published many award-winning stories, including Robert A. Heinlein's novel The Moon Is a H... [truncated]\r
Tiny one                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       \r
.       \r
A longer line\r
An even longer line\r
A normal line      

Macros
ALERT! message: alert
Error: message: error
Warning: message: warning
message: info
message: verbose
message: debug
message: regression
temporary message: info\r
temporary message: verbose\r
temporary message: debug  \r
                        \r

Filters
report 'default report' [info]:
 -> filter 'filter 1' (open) [info]:
 --> no conditions
 --> output:
 ---> console 'local console' (open) [info]
file1:2:func1 INFO: blah
file1:10:func2 INFO: blah
file1:20:func3 INFO: blah
file2:20:func6 INFO: blah
report 'default report' [info]:
 -> filter 'filter 1' (open) [info]:
 --> conditions:
 ---> REJECT 'file2' 0 <= line <= 0, alert <= level <= regression
 --> output:
 ---> console 'local console' (open) [info]
file1:2:func1 INFO: blah
file1:10:func2 INFO: blah
file1:20:func3 INFO: blah
report 'default report' [info]:
 -> filter 'filter 1' (open) [info]:
 --> conditions:
 ---> REJECT 'file2' 0 <= line <= 0, alert <= level <= regression
 ---> REJECT 'file1' 0 <= line <= 15, alert <= level <= regression
 --> output:
 ---> console 'local console' (open) [info]
file1:20:func3 INFO: blah
report 'default report' [regression]:
 -> filter 'filter 1' (open) [regression]:
 --> conditions:
 ---> REJECT 'file2' 0 <= line <= 0, alert <= level <= regression
 ---> REJECT 'file1' 0 <= line <= 15, alert <= level <= regression
 ---> ACCEPT 'file1' 5 <= line <= 25, debug <= level <= regression
 --> output:
 ---> console 'local console' (open) [info]
file1:20:func3 INFO: blah
file1:20:func4 DEBUG: blah
report 'default report' [regression]:
 -> filter 'filter 1' (open) [regression]:
 --> conditions:
 ---> REJECT 'file2' 0 <= line <= 0, alert <= level <= regression
 ---> REJECT 'file1' 0 <= line <= 15, alert <= level <= regression
 ---> ACCEPT 'file1' 5 <= line <= 25, debug <= level <= regression
 ---> ACCEPT '' 0 <= line <= 0, alert <= level <= verbose
 --> output:
 ---> console 'local console' (open) [info]
file0:20:func0 VERBOSE: blah
file1:2:func1 INFO: blah
file1:10:func2 INFO: blah
file1:20:func3 INFO: blah
file1:20:func4 DEBUG: blah
file2:20:func6 INFO: blah
report 'default report' [verbose]:
 -> filter 'filter 1' (open) [verbose]:
 --> conditions:
 ---> REJECT 'file2' 0 <= line <= 0, alert <= level <= regression
 ---> REJECT 'file1' 0 <= line <= 15, alert <= level <= regression
 ---> ACCEPT '' 0 <= line <= 0, alert <= level <= verbose
 --> output:
 ---> console 'local console' (open) [info]
file0:20:func0 VERBOSE: blah
file1:2:func1 INFO: blah
file1:10:func2 INFO: blah
file1:20:func3 INFO: blah
file2:20:func6 INFO: blah
report 'default report' [info]:
 -> filter 'filter 1' (open) [info]:
 --> conditions:
 ---> REJECT 'file2' 0 <= line <= 0, alert <= level <= regression
 ---> REJECT 'file1' 0 <= line <= 15, alert <= level <= regression
 ---> ACCEPT 'file2' 0 <= line <= 0
 --> output:
 ---> console 'local console' (open) [info]
file1:20:func3 INFO: blah
file2:20:func6 INFO: blah
report 'default report' [debug]:
 -> filter 'filter 1' (open) [debug]:
 --> conditions:
 ---> REJECT 'file2' 0 <= line <= 0, alert <= level <= regression
 ---> REJECT 'file1' 0 <= line <= 15, alert <= level <= regression
 ---> ACCEPT 'file2' 0 <= line <= 0
 ---> ACCEPT 'file2' function = func5, debug <= level <= debug
 --> output:
 ---> console 'local console' (open) [info]
file1:20:func3 INFO: blah
file2:10:func5 DEBUG: blah
file2:20:func6 INFO: blah

Log to file

Error logging to file
Error: No such file or directory creating log file: 'missing/report.log'

Rotate file
report.log:
2009-08-07 06:05:04 DEBUG report_test.cpp:475 message: debug
report.log-1.gz:
2009-08-07 06:05:04 VERB  report_test.cpp:474 message: verbose
report.log-2.gz:
2009-08-07 06:05:04 INFO  report_test.cpp:473 message: info
report.log-3.gz:
2009-08-07 06:05:04 WARN  report_test.cpp:472 message: warning
report.log-4.gz:
2009-08-07 06:05:04 ERROR report_test.cpp:471 message: error
report.log-5.gz:
2009-08-07 06:05:04 ALERT report_test.cpp:470 message: alert
report.log:
report.log-1.gz:
2009-08-07 06:05:04 DEBUG report_test.cpp:475 message: debug
report.log-2.gz:
2009-08-07 06:05:04 VERB  report_test.cpp:474 message: verbose
report.log-3.gz:
2009-08-07 06:05:04 INFO  report_test.cpp:473 message: info
report.log-4.gz:
2009-08-07 06:05:04 WARN  report_test.cpp:472 message: warning
report.log-5.gz:
2009-08-07 06:05:04 ERROR report_test.cpp:471 message: error
report.log:
report.log-1.gz:
2009-08-07 06:05:04 DEBUG report_test.cpp:475 message: debug
report.log-2.gz:
2009-08-07 06:05:04 VERB  report_test.cpp:474 message: verbose
report.log-3.gz:
2009-08-07 06:05:04 INFO  report_test.cpp:473 message: info
report.log-4.gz:
2009-08-07 06:05:04 WARN  report_test.cpp:472 message: warning
report.log-5.gz:
2009-08-07 06:05:04 ERROR report_test.cpp:471 message: error
report.log:
report.log-1.gz:
1
report.log-2.gz:
2009-08-07 06:05:04 DEBUG report_test.cpp:475 message: debug
report.log-3.gz:
2009-08-07 06:05:04 VERB  report_test.cpp:474 message: verbose
report.log-4.gz:
2009-08-07 06:05:04 INFO  report_test.cpp:473 message: info
report.log-5.gz:
2009-08-07 06:05:04 WARN  report_test.cpp:472 message: warning
report.log:
report.log-1.gz:
1
report.log-2.gz:
1
report.log-3.gz:
2009-08-07 06:05:04 DEBUG report_test.cpp:475 message: debug
report.log-4.gz:
2009-08-07 06:05:04 VERB  report_test.cpp:474 message: verbose
report.log-5.gz:
2009-08-07 06:05:04 INFO  report_test.cpp:473 message: info
report.log:
report.log-1.gz:
1
report.log-2.gz:
1
report.log-3.gz:
1
report.log-4.gz:
2009-08-07 06:05:04 DEBUG report_test.cpp:475 message: debug
report.log-5.gz:
2009-08-07 06:05:04 VERB  report_test.cpp:474 message: verbose
report.log:
report.log-1.gz:
1
report.log-2.gz:
1
report.log-3.gz:
1
report.log-4.gz:
2009-08-07 06:05:04 DEBUG report_test.cpp:475 message: debug
report.log-5.gz:
2009-08-07 06:05:04 VERB  report_test.cpp:474 message: verbose
report.log
report.log-1.gz
report.log-2.gz
report.log-3.gz
report.log-4.gz
report.log-5.gz

Specific report
ALERT! some message with a number 9
message with a number 10

End of tests
