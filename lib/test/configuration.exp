Test: server configuration
Items:
  client, occ.: min = 1, no max; params: min params = 1, max params = 2
    config, occ.: min = 1, max = 1; params: min params = 1, max params = 1
    expire, occ.: optional, max = 1; params: min params = 1, max params = 1
    hostname, occ.: optional, max = 1; params: min params = 1, max params = 1
    option, occ.: optional, no max; params: min params = 1, max params = 2
    protocol, occ.: min = 1, max = 1; params: min params = 1, max params = 1
  db, occ.: optional, max = 1; params: min params = 1, max params = 1
  filter, occ.: optional, no max; params: min params = 2, max params = 2
    condition, occ.: min = 1, no max; params: min params = 2, max params = 2
  trash, occ.: optional, max = 1; params: min params = 1, max params = 1
Lines:
1:   db test_db
3:   filter all backup
4:     condition type file
5:     condition path_end ~
7:   filter any test_or
8:     condition filter backup
9:     condition !size< 1000
11:   client myClient
12:     protocol nfs
13:     hostname myClient
14:     config /home/User/hbackup.list
16:   client other
17:     protocol ssh
18:     hostname otherClient
19:     config /home/backup/Backup.list
21:   client myhost
22:     protocol file
23:     hostname myhost.mynetwork.lan
24:     config etc/localhost.list
25:     expire 1
27:   client client xp
28:     protocol smb
29:     option username Myself
30:     option password flesyM
31:     option nocase
32:     hostname myClient
33:     config C:\Backup\Backup.LST

Test: client configuration
Error: after line: 0: missing keyword 'path'
Error: at line: 5: found CR character, aborting
Items:
  expire, occ.: optional, max = 1; params: min params = 1, max params = 1
  filter, occ.: optional, no max; params: min params = 2, max params = 2
    condition, occ.: min = 1, no max; params: min params = 2, max params = 2
  path, occ.: min = 1, no max; params: min params = 1, max params = 1
    compress, occ.: optional, max = 1; params: min params = 1, max params = 1
    filter, occ.: optional, no max; params: min params = 2, max params = 2
      condition, occ.: min = 1, no max; params: min params = 2, max params = 2
    ignore, occ.: optional, max = 1; params: min params = 1, max params = 1
    parser, occ.: optional, no max; params: min params = 1, max params = 2
Lines:
2:   filter and subdir
3:     condition path_start subdir
4:     condition !size< 100
6:   filter and bigfile
7:     condition size>= 10
8:     condition type file
10:   expire 1
12:   path test2//
14:   path test1
16:     filter and not_object
17:       condition !path_end .o
19:     filter or to_be_ignored
20:       condition filter subdir
21:       condition filter backup
22:       condition !filter not_object
24:     ignore to_be_ignored
26:     compress bigfile
28:     parser cvs controlled
29:     parser svn modified
Test: general configuration
Items:
  client, occ.: min = 1, no max; params: min params = 1, max params = 2
    config, occ.: optional, max = 1; params: min params = 1, max params = 1
    expire, occ.: optional, max = 1; params: min params = 1, max params = 1
    filter, occ.: optional, no max; params: min params = 2, max params = 2
      condition, occ.: min = 1, no max; params: min params = 2, max params = 2
    hostname, occ.: optional, max = 1; params: min params = 1, max params = 1
    option, occ.: optional, no max; params: min params = 1, max params = 2
    path, occ.: optional, no max; params: min params = 1, max params = 1
      compress, occ.: optional, max = 1; params: min params = 1, max params = 1
      filter, occ.: optional, no max; params: min params = 2, max params = 2
        condition, occ.: min = 1, no max; params: min params = 2, max params = 2
      ignore, occ.: optional, max = 1; params: min params = 1, max params = 1
      parser, occ.: optional, no max; params: min params = 1, max params = 2
    protocol, occ.: min = 1, max = 1; params: min params = 1, max params = 1
  db, occ.: optional, max = 1; params: min params = 1, max params = 1
  filter, occ.: optional, no max; params: min params = 2, max params = 2
    condition, occ.: min = 1, no max; params: min params = 2, max params = 2
  trash, occ.: optional, max = 1; params: min params = 1, max params = 1
Lines:
1:   db test_db
3:   filter all backup
4:     condition type file
5:     condition path_end ~
7:   filter any test_or
8:     condition filter backup
9:     condition !size< 1000
11:   client myClient
12:     protocol nfs
13:     hostname myClient
14:     config /home/User/hbackup.list
16:   client other
17:     protocol ssh
18:     hostname otherClient
19:     config /home/backup/Backup.list
21:     filter and subdir
22:       condition path_start subdir
23:       condition !size< 100
25:     filter and bigfile
26:       condition size>= 10
27:       condition type file
29:     expire 1
31:     path test2//
33:     path test1
35:       filter and not_object
36:         condition !path_end .o
38:       filter or to_be_ignored
39:         condition filter subdir
40:         condition filter backup
41:         condition !filter not_object
43:       ignore to_be_ignored
45:       compress bigfile
47:       parser cvs controlled
48:       parser svn modified
50:   client myhost
51:     protocol file
52:     hostname myhost.mynetwork.lan
53:     config etc/localhost.list
54:     expire 1
56:   client client xp
57:     protocol smb
58:     option username Myself
59:     option password flesyM
60:     option nocase
61:     hostname myClient
62:     config C:\Backup\Backup.LST
Test: broken configuration
Error: after line: 0: need at most 1 occurence(s) of keyword 'db'
Error: at line: 4: keyword 'filter' requires 2 parameter(s), found 1
Error: after line: 8: missing keyword 'condition'
Error: after line: 13: need at most 1 occurence(s) of keyword 'config'
Error: after line: 13: need at most 1 occurence(s) of keyword 'expire'
Error: after line: 13: need at most 1 occurence(s) of keyword 'hostname'
Error: at line: 17: keyword 'option' requires at most 2 parameter(s), found 3
Error: at line: 18: keyword 'option' requires at least 1 parameter(s), found 0
Error: at line: 26: keyword 'filter' requires 2 parameter(s), found 3
Error: at line: 27: keyword 'condition' requires 2 parameter(s), found 3
Error: at line: 28: keyword 'condition' requires 2 parameter(s), found 1
Error: at line: 31: keyword 'expire' requires 1 parameter(s), found 2
Error: after line: 35: need at most 1 occurence(s) of keyword 'compress'
Error: after line: 35: need at most 1 occurence(s) of keyword 'ignore'
Error: after line: 45: missing keyword 'condition'
Error: at line: 47: keyword 'filter' requires 2 parameter(s), found 1
Error: after line: 47: missing keyword 'condition'
Error: after line: 59: missing keyword 'protocol'
Error: at line: 65: keyword 'ignore' requires 1 parameter(s), found 2
Error: at line: 66: keyword 'compress' requires 1 parameter(s), found 2
Error: at line: 79: keyword 'ignore' requires 1 parameter(s), found 0
Error: at line: 80: keyword 'compress' requires 1 parameter(s), found 0
Error: at line: 82: keyword 'what_the_f...?' incorrect or misplaced, aborting
Items:
  client, occ.: min = 1, no max; params: min params = 1, max params = 2
    config, occ.: optional, max = 1; params: min params = 1, max params = 1
    expire, occ.: optional, max = 1; params: min params = 1, max params = 1
    filter, occ.: optional, no max; params: min params = 2, max params = 2
      condition, occ.: min = 1, no max; params: min params = 2, max params = 2
    hostname, occ.: optional, max = 1; params: min params = 1, max params = 1
    option, occ.: optional, no max; params: min params = 1, max params = 2
    path, occ.: optional, no max; params: min params = 1, max params = 1
      compress, occ.: optional, max = 1; params: min params = 1, max params = 1
      filter, occ.: optional, no max; params: min params = 2, max params = 2
        condition, occ.: min = 1, no max; params: min params = 2, max params = 2
      ignore, occ.: optional, max = 1; params: min params = 1, max params = 1
      parser, occ.: optional, no max; params: min params = 1, max params = 2
    protocol, occ.: min = 1, max = 1; params: min params = 1, max params = 1
  db, occ.: optional, max = 1; params: min params = 1, max params = 1
  filter, occ.: optional, no max; params: min params = 2, max params = 2
    condition, occ.: min = 1, no max; params: min params = 2, max params = 2
  trash, occ.: optional, max = 1; params: min params = 1, max params = 1
Lines:
1:   db test_db
2:   db blah
4:   filter all
5:     condition type file
6:     condition path_end ~
8:   filter any test_or
10:   client myClient
11:     protocol nfs
13:   client other
14:     protocol ssh
15:     hostname otherClient
16:     hostname 192.168.0.132
17:     option I am happy
18:     option
19:     config /home/backup/Backup.list
20:     config /home/backup/Backup2.list
22:     filter and subdir
23:       condition path_start subdir
24:       condition !size< 100
26:     filter and bigfile 3
27:       condition size>= 10 yeah
28:       condition type
30:     expire 1
31:     expire 2 3
33:     path test2//
35:     path test1
37:       filter and not_object
38:         condition !path_end .o
40:       filter or to_be_ignored
41:         condition filter subdir
42:         condition filter backup
43:         condition !filter not_object
45:       filter and blah
47:       filter or
50:       ignore to_be_ignored
51:       ignore to_be_ignored2
53:       compress bigfile
54:       compress bigfile2
56:       parser cvs controlled
57:       parser svn modified
59:   client myhost
60:     hostname myhost.mynetwork.lan
61:     config etc/localhost.list
62:     expire 1
64:     path blah
65:       ignore 2 3
66:       compress 4 5
68:   client client xp
69:     protocol smb
70:     option username Myself
71:     option password flesyM
72:     option nocase
73:     hostname myClient
74:     config C:\Backup\Backup.LST
76:     path C:\Crash"
77:     path C:\Crash
78:     path blah
79:       ignore
80:       compress
