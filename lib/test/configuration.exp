
Test: client configuration
Syntax:
  expire, occ.: optional, max = 1; params: min = max = 1
  filter, occ.: optional, no max; params: min = max = 2
    condition, occ.: min = 1, no max; params: min = max = 2
  ignore, occ.: optional, max = 1; params: min = max = 1
  path, occ.: min = 1, no max; params: min = max = 1
    compress, occ.: optional, max = 1; params: min = max = 1
    filter, occ.: optional, no max; params: min = max = 2
      condition, occ.: min = 1, no max; params: min = max = 2
    ignore, occ.: optional, max = 1; params: min = max = 1
    no_compress, occ.: optional, max = 1; params: min = max = 1
    parser, occ.: optional, no max; params: min = 1, max = 2
  users, occ.: optional, max = 1; params: min = 1, no max
Error: after line 0: missing keyword 'path'
Error: at line 5: found CR character, aborting
Test: accept CRLF
0: root
2:   filter and subdir
3:     condition path_start subdir
4:     condition !size< 100
6:   users biloute machin
8:   ignore backup
10:   filter and bigfile
11:     condition size>= 10
12:     condition type file
14:   expire 1
16:   path test2//
18:   path test1
20:     filter and not_object
21:       condition !path_end .o
23:     filter or to_be_ignored
24:       condition filter subdir
25:       condition !filter not_object
27:     ignore to_be_ignored
29:     compress bigfile
31:     parser cvs controlled
32:     parser svn modified
34:     filter and cvs_entries
35:       condition name Entries
37:     no_compress cvs_entries
Config:
2:   filter and subdir
3:     condition path_start subdir
4:     condition !size< 100
6:   users biloute machin
8:   ignore backup
10:   filter and bigfile
11:     condition size>= 10
12:     condition type file
14:   expire 1
16:   path test2//
18:   path test1
20:     filter and not_object
21:       condition !path_end .o
23:     filter or to_be_ignored
24:       condition filter subdir
25:       condition !filter not_object
27:     ignore to_be_ignored
29:     compress bigfile
31:     parser cvs controlled
32:     parser svn modified
34:     filter and cvs_entries
35:       condition name Entries
37:     no_compress cvs_entries
Test: server configuration
Syntax:
  client, occ.: min = 1, no max; params: min = 1, max = 2
    config, occ.: optional, max = 1; params: min = max = 1
    expire, occ.: optional, max = 1; params: min = max = 1
    filter, occ.: optional, no max; params: min = max = 2
      condition, occ.: min = 1, no max; params: min = max = 2
    hostname, occ.: optional, max = 1; params: min = max = 1
    ignore, occ.: optional, max = 1; params: min = max = 1
    option, occ.: optional, no max; params: min = 1, max = 2
    path, occ.: optional, no max; params: min = max = 1
      compress, occ.: optional, max = 1; params: min = max = 1
      filter, occ.: optional, no max; params: min = max = 2
        condition, occ.: min = 1, no max; params: min = max = 2
      ignore, occ.: optional, max = 1; params: min = max = 1
      no_compress, occ.: optional, max = 1; params: min = max = 1
      parser, occ.: optional, no max; params: min = 1, max = 2
    protocol, occ.: min = 1, max = 1; params: min = max = 1
    report_copy_error_once, occ.: optional, max = 1; params: min = max = 0
    timeout_nowarning, occ.: optional, max = 1; params: min = max = 0
    users, occ.: optional, max = 1; params: min = 1, no max
  db, occ.: optional, max = 1; params: min = max = 1
    compress, occ.: optional, max = 1; params: min = max = 1
    compress_auto, occ.: optional, max = 1; params: min = max = 0
  filter, occ.: optional, no max; params: min = max = 2
    condition, occ.: min = 1, no max; params: min = max = 2
  ignore, occ.: optional, max = 1; params: min = max = 1
  log, occ.: optional, max = 1; params: min = max = 1
    backups, occ.: optional, max = 1; params: min = max = 1
    level, occ.: optional, max = 1; params: min = max = 1
    max_lines, occ.: optional, max = 1; params: min = max = 1
  report_copy_error_once, occ.: optional, max = 1; params: min = max = 0
  timeout_nowarning, occ.: optional, max = 1; params: min = max = 0
0: root
1:   log hbackup.log
2:     max_lines 100000
3:     backups 10
4:     level verbose
5:   db test_db
6:     compress auto
8:     compress_auto
10:   filter all nothing
11:     condition type pipe
12:     condition size> 10
14:   ignore nothing
16:   filter all backup
17:     condition type file
18:     condition path_end ~
20:   filter any test_or
21:     condition filter backup
22:     condition !size< 1000
24:   client myClient xp
25:     protocol smb
26:     users backup
27:     config C:\Backup\Backup.LST
29:   client myClient
30:     protocol nfs
31:     users backup root
32:     hostname myClient
33:     config /home/User/hbackup.list
35:   client newClient
36:     protocol ssh
37:     option username user
38:     option password p4sS?
39:     config /home/Blah/hbackup.list
41:   client other
42:     protocol none
43:     hostname otherClient
44:     option username foo
45:     option password bar
46:     config /home/Blah/hbackup.list
48:     filter and subdir
49:       condition path_start subdir
50:       condition !size< 100
52:     filter and bigfile
53:       condition size>= 10
54:       condition type file
56:     expire 1
58:     path test2//
60:     path test1
62:       filter and not_object
63:         condition !path_end .o
65:       filter or to_be_ignored
66:         condition filter subdir
67:         condition filter backup
68:         condition !filter not_object
70:       ignore to_be_ignored
72:       compress bigfile
74:       parser cvs controlled
75:       parser svn modified
77:   client myhost
78:     report_copy_error_once
79:     protocol file
80:     hostname myhost.mynetwork.lan
81:     timeout_nowarning
82:     config etc/localhost.list
83:     expire 1
85:   client client xp
86:     ignore backup
87:     protocol smb
88:     option username Myself
89:     option password flesyM
90:     option nocase
91:     hostname myClient
92:     config C:\Backup\Backup.LST
94:   client aClient vista
95:     protocol smb
96:     filter and huge_file
97:       condition !filter backup
98:       condition !size< 100
100:     path C:\Test Dir
101:       filter and compress_m
102:         condition !filter huge_file
103:       compress compress_m
104:       ignore backup
105:       parser svn modified
106:     report_copy_error_once
Config:
1:   log hbackup.log
2:     max_lines 100000
3:     backups 10
4:     level verbose
5:   db test_db
6:     compress auto
8:     compress_auto
10:   filter all nothing
11:     condition type pipe
12:     condition size> 10
14:   ignore nothing
16:   filter all backup
17:     condition type file
18:     condition path_end ~
20:   filter any test_or
21:     condition filter backup
22:     condition !size< 1000
24:   client myClient xp
25:     protocol smb
26:     users backup
27:     config C:\Backup\Backup.LST
29:   client myClient
30:     protocol nfs
31:     users backup root
32:     hostname myClient
33:     config /home/User/hbackup.list
35:   client newClient
36:     protocol ssh
37:     option username user
38:     option password p4sS?
39:     config /home/Blah/hbackup.list
41:   client other
42:     protocol none
43:     hostname otherClient
44:     option username foo
45:     option password bar
46:     config /home/Blah/hbackup.list
48:     filter and subdir
49:       condition path_start subdir
50:       condition !size< 100
52:     filter and bigfile
53:       condition size>= 10
54:       condition type file
56:     expire 1
58:     path test2//
60:     path test1
62:       filter and not_object
63:         condition !path_end .o
65:       filter or to_be_ignored
66:         condition filter subdir
67:         condition filter backup
68:         condition !filter not_object
70:       ignore to_be_ignored
72:       compress bigfile
74:       parser cvs controlled
75:       parser svn modified
77:   client myhost
78:     report_copy_error_once
79:     protocol file
80:     hostname myhost.mynetwork.lan
81:     timeout_nowarning
82:     config etc/localhost.list
83:     expire 1
85:   client client xp
86:     ignore backup
87:     protocol smb
88:     option username Myself
89:     option password flesyM
90:     option nocase
91:     hostname myClient
92:     config C:\Backup\Backup.LST
94:   client aClient vista
95:     protocol smb
96:     filter and huge_file
97:       condition !filter backup
98:       condition !size< 100
100:     path C:\Test Dir
101:       filter and compress_m
102:         condition !filter huge_file
103:       compress compress_m
104:       ignore backup
105:       parser svn modified
106:     report_copy_error_once
Test: configuration save
0: root
1:   log hbackup.log
2:     max_lines 100000
3:     backups 10
4:     level verbose
5:   db test_db
6:     compress auto
7:     compress_auto
8:   filter all nothing
9:     condition type pipe
10:     condition size> 10
11:   ignore nothing
12:   filter all backup
13:     condition type file
14:     condition path_end ~
15:   filter any test_or
16:     condition filter backup
17:     condition !size< 1000
18:   client myClient xp
19:     protocol smb
20:     users backup
21:     config C:\Backup\Backup.LST
22:   client myClient
23:     protocol nfs
24:     users backup root
25:     hostname myClient
26:     config /home/User/hbackup.list
27:   client newClient
28:     protocol ssh
29:     option username user
30:     option password p4sS?
31:     config /home/Blah/hbackup.list
32:   client other
33:     protocol none
34:     hostname otherClient
35:     option username foo
36:     option password bar
37:     config /home/Blah/hbackup.list
38:     filter and subdir
39:       condition path_start subdir
40:       condition !size< 100
41:     filter and bigfile
42:       condition size>= 10
43:       condition type file
44:     expire 1
45:     path test2//
46:     path test1
47:       filter and not_object
48:         condition !path_end .o
49:       filter or to_be_ignored
50:         condition filter subdir
51:         condition filter backup
52:         condition !filter not_object
53:       ignore to_be_ignored
54:       compress bigfile
55:       parser cvs controlled
56:       parser svn modified
57:   client myhost
58:     report_copy_error_once
59:     protocol file
60:     hostname myhost.mynetwork.lan
61:     timeout_nowarning
62:     config etc/localhost.list
63:     expire 1
64:   client client xp
65:     ignore backup
66:     protocol smb
67:     option username Myself
68:     option password flesyM
69:     option nocase
70:     hostname myClient
71:     config C:\Backup\Backup.LST
72:   client aClient vista
73:     protocol smb
74:     filter and huge_file
75:       condition !filter backup
76:       condition !size< 100
77:     path C:\Test Dir
78:       filter and compress_m
79:         condition !filter huge_file
80:       compress compress_m
81:       ignore backup
82:       parser svn modified
83:     report_copy_error_once
Config:
1:   log hbackup.log
2:     max_lines 100000
3:     backups 10
4:     level verbose
5:   db test_db
6:     compress auto
7:     compress_auto
8:   filter all nothing
9:     condition type pipe
10:     condition size> 10
11:   ignore nothing
12:   filter all backup
13:     condition type file
14:     condition path_end ~
15:   filter any test_or
16:     condition filter backup
17:     condition !size< 1000
18:   client myClient xp
19:     protocol smb
20:     users backup
21:     config C:\Backup\Backup.LST
22:   client myClient
23:     protocol nfs
24:     users backup root
25:     hostname myClient
26:     config /home/User/hbackup.list
27:   client newClient
28:     protocol ssh
29:     option username user
30:     option password p4sS?
31:     config /home/Blah/hbackup.list
32:   client other
33:     protocol none
34:     hostname otherClient
35:     option username foo
36:     option password bar
37:     config /home/Blah/hbackup.list
38:     filter and subdir
39:       condition path_start subdir
40:       condition !size< 100
41:     filter and bigfile
42:       condition size>= 10
43:       condition type file
44:     expire 1
45:     path test2//
46:     path test1
47:       filter and not_object
48:         condition !path_end .o
49:       filter or to_be_ignored
50:         condition filter subdir
51:         condition filter backup
52:         condition !filter not_object
53:       ignore to_be_ignored
54:       compress bigfile
55:       parser cvs controlled
56:       parser svn modified
57:   client myhost
58:     report_copy_error_once
59:     protocol file
60:     hostname myhost.mynetwork.lan
61:     timeout_nowarning
62:     config etc/localhost.list
63:     expire 1
64:   client client xp
65:     ignore backup
66:     protocol smb
67:     option username Myself
68:     option password flesyM
69:     option nocase
70:     hostname myClient
71:     config C:\Backup\Backup.LST
72:   client aClient vista
73:     protocol smb
74:     filter and huge_file
75:       condition !filter backup
76:       condition !size< 100
77:     path C:\Test Dir
78:       filter and compress_m
79:         condition !filter huge_file
80:       compress compress_m
81:       ignore backup
82:       parser svn modified
83:     report_copy_error_once
Test: broken configuration
Error: after line 0: need at most 1 occurence(s) of keyword 'db'
Error: after line 0: need at most 1 occurence(s) of keyword 'report_copy_error_once'
Error: at line 7: keyword 'filter' requires 2 parameter(s), found 1
Error: after line 11: missing keyword 'condition'
Error: after line 13: need at most 1 occurence(s) of keyword 'ignore'
Error: at line 15: keyword 'users' requires at least 1 parameter(s), found 0
Error: at line 17: keyword 'ignore' requires 1 parameter(s), found 0
Error: after line 19: need at most 1 occurence(s) of keyword 'config'
Error: after line 19: need at most 1 occurence(s) of keyword 'expire'
Error: after line 19: need at most 1 occurence(s) of keyword 'hostname'
Error: at line 23: keyword 'option' requires at most 2 parameter(s), found 3
Error: at line 24: keyword 'option' requires at least 1 parameter(s), found 0
Error: at line 32: keyword 'filter' requires 2 parameter(s), found 3
Error: at line 33: keyword 'condition' requires 2 parameter(s), found 3
Error: at line 34: keyword 'condition' requires 2 parameter(s), found 1
Error: at line 37: keyword 'expire' requires 1 parameter(s), found 2
Error: after line 41: need at most 1 occurence(s) of keyword 'compress'
Error: after line 41: need at most 1 occurence(s) of keyword 'ignore'
Error: after line 51: missing keyword 'condition'
Error: at line 53: keyword 'filter' requires 2 parameter(s), found 1
Error: after line 53: missing keyword 'condition'
Error: after line 65: missing keyword 'protocol'
Error: at line 71: keyword 'ignore' requires 1 parameter(s), found 2
Error: at line 72: keyword 'compress' requires 1 parameter(s), found 2
Error: at line 85: keyword 'ignore' requires 1 parameter(s), found 0
Error: at line 86: keyword 'compress' requires 1 parameter(s), found 0
Error: at line 88: keyword 'what_the_f...?' incorrect or misplaced, aborting
0: root
1:   db test_db
2:   db blah
4:   report_copy_error_once
5:   report_copy_error_once
Config:
1:   db test_db
2:   db blah
4:   report_copy_error_once
5:   report_copy_error_once
7:   filter all
8:     condition type file
9:     condition path_end ~
11:   filter any test_or
13:   client myClient
14:     protocol nfs
15:     users
16:     ignore test_or
17:     ignore
19:   client other
20:     protocol ssh
21:     hostname otherClient
22:     hostname 192.168.0.132
23:     option I am happy
24:     option
25:     config /home/backup/Backup.list
26:     config /home/backup/Backup2.list
28:     filter and subdir
29:       condition path_start subdir
30:       condition !size< 100
32:     filter and bigfile 3
33:       condition size>= 10 yeah
34:       condition type
36:     expire 1
37:     expire 2 3
39:     path test2//
41:     path test1
43:       filter and not_object
44:         condition !path_end .o
46:       filter or to_be_ignored
47:         condition filter subdir
48:         condition filter backup
49:         condition !filter not_object
51:       filter and blah
53:       filter or
56:       ignore to_be_ignored
57:       ignore to_be_ignored2
59:       compress bigfile
60:       compress bigfile2
62:       parser cvs controlled
63:       parser svn modified
65:   client myhost
66:     hostname myhost.mynetwork.lan
67:     config etc/localhost.list
68:     expire 1
70:     path blah
71:       ignore 2 3
72:       compress 4 5
74:   client client xp
75:     protocol smb
76:     option username Myself
77:     option password flesyM
78:     option nocase
79:     hostname myClient
80:     config C:\Backup\Backup.LST
82:     path C:\Crash"
83:     path C:\Crash
84:     path blah
85:       ignore
86:       compress
