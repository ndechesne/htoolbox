Test: server configuration
Items:
  client, occ.: min = 1, no max; params: min params = 2, max params = 2
    config, occ.: min = 1, max = 1; params: min params = 1, max params = 1
    expire, occ.: optional, max = 1; params: min params = 1, max params = 1
    hostname, occ.: optional, max = 1; params: min params = 1, max params = 1
    option, occ.: optional, no max; params: min params = 1, max params = 2
  db, occ.: optional, max = 1; params: min params = 1, max params = 1
  filter, occ.: optional, no max; params: min params = 2, max params = 2
    condition, occ.: min = 1, no max; params: min params = 2, max params = 2
  trash, occ.: optional, max = 1; params: min params = 1, max params = 1
Lines:
12:  client nfs myClient
14:    config /home/User/hbackup.list
13:    hostname myClient
16:  client ssh other
18:    config /home/backup/Backup.list
17:    hostname otherClient
20:  client file myhost
22:    config etc/localhost.list
23:    expire 1
21:    hostname myhost.mynetwork.lan
25:  client smb client
30:    config C:\Backup\Backup.LST
29:    hostname myClient
26:    option username Myself
27:    option password flesyM
28:    option nocase
 1:  db test_db
 4:  filter all backup
 5:    condition type file
 6:    condition path_end ~
 8:  filter any test_or
 9:    condition filter backup
10:    condition !size< 1000
 2:  trash 1

Test: client configuration
Items:
  expire, occ.: optional, max = 1; params: min params = 1, max params = 1
  filter, occ.: optional, no max; params: min params = 2, max params = 2
    condition, occ.: min = 1, no max; params: min params = 2, max params = 2
  path, occ.: min = 1, no max; params: min params = 1, max params = 1
    compress, occ.: optional, max = 1; params: min params = 1, max params = 1
    filter, occ.: optional, no max; params: min params = 2, max params = 2
      condition, occ.: min = 1, no max; params: min params = 2, max params = 2
    ignore, occ.: optional, max = 1; params: min params = 1, max params = 1
    parser, occ.: optional, no max; params: min params = 1, max params = 2
Lines:
10:  expire 1
 2:  filter and subdir
 3:    condition path_start subdir
 4:    condition !size< 100
 6:  filter and bigfile
 7:    condition size>= 10
 8:    condition type file
12:  path test2//
14:  path test1
26:    compress bigfile
16:    filter and not_object
17:      condition !path_end .o
19:    filter or to_be_ignored
20:      condition filter subdir
21:      condition filter backup
22:      condition !filter not_object
24:    ignore to_be_ignored
28:    parser cvs controlled
29:    parser svn modified
30:    parser bzr modified
Test: general configuration
Items:
  client, occ.: min = 1, no max; params: min params = 2, max params = 2
    config, occ.: min = 1, max = 1; params: min params = 1, max params = 1
    expire, occ.: optional, max = 1; params: min params = 1, max params = 1
    filter, occ.: optional, no max; params: min params = 2, max params = 2
      condition, occ.: min = 1, no max; params: min params = 2, max params = 2
    hostname, occ.: optional, max = 1; params: min params = 1, max params = 1
    option, occ.: optional, no max; params: min params = 1, max params = 2
    path, occ.: optional, no max; params: min params = 1, max params = 1
      compress, occ.: optional, max = 1; params: min params = 1, max params = 1
      filter, occ.: optional, no max; params: min params = 2, max params = 2
        condition, occ.: min = 1, no max; params: min params = 2, max params = 2
      ignore, occ.: optional, max = 1; params: min params = 1, max params = 1
      parser, occ.: optional, no max; params: min params = 1, max params = 2
  db, occ.: optional, max = 1; params: min params = 1, max params = 1
  filter, occ.: optional, no max; params: min params = 2, max params = 2
    condition, occ.: min = 1, no max; params: min params = 2, max params = 2
  trash, occ.: optional, max = 1; params: min params = 1, max params = 1
Lines:
12:  client nfs myClient
14:    config /home/User/hbackup.list
13:    hostname myClient
16:  client ssh other
18:    config /home/backup/Backup.list
28:    expire 1
20:    filter and subdir
21:      condition path_start subdir
22:      condition !size< 100
24:    filter and bigfile
25:      condition size>= 10
26:      condition type file
17:    hostname otherClient
30:    path test2//
32:    path test1
44:      compress bigfile
34:      filter and not_object
35:        condition !path_end .o
37:      filter or to_be_ignored
38:        condition filter subdir
39:        condition filter backup
40:        condition !filter not_object
42:      ignore to_be_ignored
46:      parser cvs controlled
47:      parser svn modified
48:      parser bzr modified
50:  client file myhost
52:    config etc/localhost.list
53:    expire 1
51:    hostname myhost.mynetwork.lan
55:  client smb client
60:    config C:\Backup\Backup.LST
59:    hostname myClient
56:    option username Myself
57:    option password flesyM
58:    option nocase
 1:  db test_db
 4:  filter all backup
 5:    condition type file
 6:    condition path_end ~
 8:  filter any test_or
 9:    condition filter backup
10:    condition !size< 1000
 2:  trash 1
Test: broken configuration
Error: after line 0: need at most 1 occurence(s) of keyword 'db'
Error: at line 3: keyword 'trash' requires 1 parameter(s), found 2
Error: at line 5: keyword 'filter' requires 2 parameter(s), found 1
Error: after line 9: missing keyword 'condition'
Error: after line 11: missing keyword 'config'
Error: after line 13: need at most 1 occurence(s) of keyword 'config'
Error: after line 13: need at most 1 occurence(s) of keyword 'expire'
Error: after line 13: need at most 1 occurence(s) of keyword 'hostname'
Error: at line 16: keyword 'option' requires at most 2 parameter(s), found 3
Error: at line 17: keyword 'option' requires at least 1 parameter(s), found 0
Error: at line 25: keyword 'filter' requires 2 parameter(s), found 3
Error: at line 26: keyword 'condition' requires 2 parameter(s), found 3
Error: at line 27: keyword 'condition' requires 2 parameter(s), found 1
Error: at line 30: keyword 'expire' requires 1 parameter(s), found 2
Error: after line 34: need at most 1 occurence(s) of keyword 'compress'
Error: after line 34: need at most 1 occurence(s) of keyword 'ignore'
Error: after line 44: missing keyword 'condition'
Error: at line 46: keyword 'filter' requires 2 parameter(s), found 1
Error: after line 46: missing keyword 'condition'
Error: at line 65: keyword 'ignore' requires 1 parameter(s), found 2
Error: at line 66: keyword 'compress' requires 1 parameter(s), found 2
Error: at line 78: keyword 'ignore' requires 1 parameter(s), found 0
Error: at line 79: keyword 'compress' requires 1 parameter(s), found 0
Error: at line 81: keyword 'what_the_f...?' incorrect or misplaced, aborting
Items:
  client, occ.: min = 1, no max; params: min params = 2, max params = 2
    config, occ.: min = 1, max = 1; params: min params = 1, max params = 1
    expire, occ.: optional, max = 1; params: min params = 1, max params = 1
    filter, occ.: optional, no max; params: min params = 2, max params = 2
      condition, occ.: min = 1, no max; params: min params = 2, max params = 2
    hostname, occ.: optional, max = 1; params: min params = 1, max params = 1
    option, occ.: optional, no max; params: min params = 1, max params = 2
    path, occ.: optional, no max; params: min params = 1, max params = 1
      compress, occ.: optional, max = 1; params: min params = 1, max params = 1
      filter, occ.: optional, no max; params: min params = 2, max params = 2
        condition, occ.: min = 1, no max; params: min params = 2, max params = 2
      ignore, occ.: optional, max = 1; params: min params = 1, max params = 1
      parser, occ.: optional, no max; params: min params = 1, max params = 2
  db, occ.: optional, max = 1; params: min params = 1, max params = 1
  filter, occ.: optional, no max; params: min params = 2, max params = 2
    condition, occ.: min = 1, no max; params: min params = 2, max params = 2
  trash, occ.: optional, max = 1; params: min params = 1, max params = 1
Lines:
11:  client nfs myClient
13:  client ssh other
18:    config /home/backup/Backup.list
19:    config /home/backup/Backup2.list
29:    expire 1
30:    expire 2 3
21:    filter and subdir
22:      condition path_start subdir
23:      condition !size< 100
25:    filter and bigfile 3
26:      condition size>= 10 yeah
27:      condition type
14:    hostname otherClient
15:    hostname 192.168.0.132
16:    option I am happy
17:    option
32:    path test2//
34:    path test1
52:      compress bigfile
53:      compress bigfile2
36:      filter and not_object
37:        condition !path_end .o
39:      filter or to_be_ignored
40:        condition filter subdir
41:        condition filter backup
42:        condition !filter not_object
44:      filter and blah
46:      filter or
49:      ignore to_be_ignored
50:      ignore to_be_ignored2
55:      parser cvs controlled
56:      parser svn modified
57:      parser bzr modified
59:  client file myhost
61:    config etc/localhost.list
62:    expire 1
60:    hostname myhost.mynetwork.lan
64:    path blah
66:      compress 4 5
65:      ignore 2 3
68:  client smb client
73:    config C:\Backup\Backup.LST
72:    hostname myClient
69:    option username Myself
70:    option password flesyM
71:    option nocase
75:    path C:\Crash"
76:    path C:\Crash
77:    path blah
79:      compress
78:      ignore
 1:  db test_db
 2:  db blah
 5:  filter all
 6:    condition type file
 7:    condition path_end ~
 9:  filter any test_or
 3:  trash 1 2
