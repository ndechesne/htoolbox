Database initialized in test_db
Reading list of missing checksums
Warning: No such file or directory opening missing checksums list
Database open in read/write mode

Test: check
Reading list
Found 0 checksums
Crawling through DB
                                  \r
Found 0 valid checksums
Saving list of missing checksums
Database not modified
Database closed
Reading list of missing checksums
Database open in read/write mode
File data gone
Reading list
Found 0 checksums
Crawling through DB
59ca0efa9f5633cb0371bbc0355478d8-0\r
Error: Data missing for: 59ca0efa9f5633cb0371bbc0355478d8-0
                                  \r
Found 0 valid checksums
Saving list of missing checksums
Database not modified
Database closed
Reading list of missing checksums
Database open in read/write mode
File data corrupted, surficial scan
Database not modified
Database closed
Reading list of missing checksums
Database open in read/write mode
Reading list
Found 0 checksums
Crawling through DB
59ca0efa9f5633cb0371bbc0355478d8-0\r
                                  \r
Found 1 valid checksums
Saving list of missing checksums
Checksum(s) with data:
 -> 59ca0efa9f5633cb0371bbc0355478d8-0
Obsolete checksum(s): 1
 -> 59ca0efa9f5633cb0371bbc0355478d8-0: removed
File data corrupted, thorough scan
Database not modified
Database closed
Reading list of missing checksums
Database open in read/write mode
Crawling through DB data
59ca0efa9f5633cb0371bbc0355478d8-0\r
Error: Data corrupted for: 59ca0efa9f5633cb0371bbc0355478d8-0, remove
                                  \r
Found 0 valid checksums
Database not modified
Database closed

Test: lock
Reading list of missing checksums
Database open in read/write mode
Database not modified
Database closed
Warning: Lock reset
Reading list of missing checksums
Database open in read/write mode
Database not modified
Database closed
Error: Lock taken by process with pid 1
Error: Lock taken by an unidentified process!
Error: Lock taken by an unidentified process!

Test: read-only mode
Database open in read-only mode
Database closed

Test: fill in DB
Reading list of missing checksums
Database open in read/write mode
Adding compressed file data to DB in: test_db/data/285b35198a5e188b3a0df3ed33f93a26-0
Adding file data to DB in: test_db/data/d41d8cd98f00b204e9800998ecf8427e-0
Adding file data to DB in: test_db/data/59ca0efa9f5633cb0371bbc0355478d8-0
Adding file data to DB in: test_db/data/3d546a1ce46c6ae10ad34ab8a81c542e-0
Database closed
[ 1] myClient         /client_path/subdir                d     0 755
[ 2] myClient         /client_path/subdir/testfile       f    12 644 285b35198a5e188b3a0df3ed33f93a26-0
[ 3] myClient         /client_path/subdir/testfile2      f    12 644 285b35198a5e188b3a0df3ed33f93a26-0
[ 4] myClient         /client_path/test space            f     0 644 d41d8cd98f00b204e9800998ecf8427e-0
[ 5] myClient         /client_path/testfile              f    13 644 59ca0efa9f5633cb0371bbc0355478d8-0
[ 6] myClient         other_path/testdir                 d     0 755
[ 7] myClient         other_path/testfile                f 145408 644 3d546a1ce46c6ae10ad34ab8a81c542e-0

Test: do nothing
Reading list of missing checksums
Database open in read/write mode
Database not modified
Database closed
[ 1] myClient         /client_path/subdir                d     0 755
[ 2] myClient         /client_path/subdir/testfile       f    12 644 285b35198a5e188b3a0df3ed33f93a26-0
[ 3] myClient         /client_path/subdir/testfile2      f    12 644 285b35198a5e188b3a0df3ed33f93a26-0
[ 4] myClient         /client_path/test space            f     0 644 d41d8cd98f00b204e9800998ecf8427e-0
[ 5] myClient         /client_path/testfile              f    13 644 59ca0efa9f5633cb0371bbc0355478d8-0
[ 6] myClient         other_path/testdir                 d     0 755
[ 7] myClient         other_path/testfile                f 145408 644 3d546a1ce46c6ae10ad34ab8a81c542e-0

Test: read clients
Database open in read-only mode
Database closed
List of clients: 1
 -> myClient

Test: read paths in myClient
Database open in read-only mode
Database closed
List of paths: 2
 -> /client_path
 -> other_path

Test: read paths in myClient below /client_path
Database open in read-only mode
Database closed
List of paths: 3
 -> /client_path/subdir
 -> /client_path/test space
 -> /client_path/testfile

Test: read paths in myClient below other_path
Database open in read-only mode
Database closed
List of paths: 2
 -> other_path/testdir
 -> other_path/testfile

Test: read paths in myClient below /client_path/subdir
Database open in read-only mode
Database closed
List of paths: 2
 -> /client_path/subdir/testfile
 -> /client_path/subdir/testfile2

Test: scan
Reading list of missing checksums
Database open in read/write mode
Reading list
Found 4 checksums
Crawling through DB
285b35198a5e188b3a0df3ed33f93a26-0\r
3d546a1ce46c6ae10ad34ab8a81c542e-0\r
Error: Data missing for: 3d546a1ce46c6ae10ad34ab8a81c542e-0
59ca0efa9f5633cb0371bbc0355478d8-0\r
d41d8cd98f00b204e9800998ecf8427e-0\r
e5ed795e721b69c53a52482d6bdcb149-0\r
                                  \r
Found 4 valid checksums
Saving list of missing checksums
Checksum(s) from list:
 -> 285b35198a5e188b3a0df3ed33f93a26-0
 -> 3d546a1ce46c6ae10ad34ab8a81c542e-0
 -> 59ca0efa9f5633cb0371bbc0355478d8-0
 -> d41d8cd98f00b204e9800998ecf8427e-0
Checksum(s) with data:
 -> 285b35198a5e188b3a0df3ed33f93a26-0
 -> 59ca0efa9f5633cb0371bbc0355478d8-0
 -> d41d8cd98f00b204e9800998ecf8427e-0
 -> e5ed795e721b69c53a52482d6bdcb149-0
Obsolete checksum(s): 1
 -> e5ed795e721b69c53a52482d6bdcb149-0: removed
Warning: Missing checksum(s): 1
 -> 3d546a1ce46c6ae10ad34ab8a81c542e-0
Database not modified
Database closed

Test: concurrent access
Reading list of missing checksums
 -> 3d546a1ce46c6ae10ad34ab8a81c542e-0
Database open in read/write mode
Database open in read-only mode
D /client_path/subdir
D /client_path/subdir/testfile
D /client_path/subdir/testfile2
D /client_path/test space
D /client_path/testfile
D other_path/testdir
D other_path/testfile
Database closed
Database closed
[ 8] myClient         /client_path/new_link              l     8 777 testfile
[ 9] myClient         /client_path/subdir                [rm]
[11] myClient         /client_path/subdir/testfile       [rm]
[13] myClient         /client_path/subdir/testfile2      [rm]
[15] myClient         /client_path/test space            [rm]
[17] myClient         /client_path/testfile              [rm]
[19] myClient         other_path/testdir                 [rm]
[21] myClient         other_path/testfile                [rm]
List of paths: 3
 -> /client_path/subdir
 -> /client_path/test space
 -> /client_path/testfile
Database open in read-only mode
Database closed
List of paths: 4
 -> /client_path/new_link
 -> /client_path/subdir
 -> /client_path/test space
 -> /client_path/testfile

Test: check format
Failed to open DB
