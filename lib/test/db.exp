Error: Cannot initialize in read-only mode
db::open error status -1
Error: Given DB path does not exist: test_db
db::open error status -1
Error: Given DB path does not exist: test_db
db::open error status -1
Error: Given DB path does not contain a database: test_db
db::open error status -1
Error: Given DB path does not contain a database: test_db
See help for information on how to initialize the DB
db::open error status -1
Database initialized: test_db
Database open in read/write mode

Test: scan & check
Found 0 checksums
Crawling through DB
Found 0 valid and 0 broken data files
Database closed
Database open in read/write mode
File data gone
Found 0 checksums
Crawling through DB
59ca0efa9f5633cb0371bbc0355478d8-0\r
                                  \r
Error: 59ca0efa9f5633cb0371bbc0355478d8-0: Data missing
Found 0 valid and 1 broken data files
Database closed
Database open in read/write mode
File data corrupted, surficial scan
Found 0 checksums
Crawling through DB
59ca0efa9f5633cb0371bbc0355478d8-0\r
                                  \r
Found 1 valid and 0 broken data files
Checksum(s) with data:
 -> 59ca0efa9f5633cb0371bbc0355478d8-0
Obsolete checksum(s): 1
 -> 59ca0efa9f5633cb0371bbc0355478d8-0: removed
Database closed
Database open in read/write mode
Found 0 checksums
Crawling through DB
Found 0 valid and 0 broken data files
File data corrupted, thorough scan
Database closed
Database open in read-only mode
Crawling through DB data
59ca0efa9f5633cb0371bbc0355478d8-0\r
                                  \r
Error: 59ca0efa9f5633cb0371bbc0355478d8-0: Data corrupted
Found 0 valid and 1 broken data files
Database closed
Database open in read/write mode
Found 0 checksums
Crawling through DB
59ca0efa9f5633cb0371bbc0355478d8-0\r
                                  \r
59ca0efa9f5633cb0371bbc0355478d8-0: Remove corrupted data
Found 0 valid and 1 broken data files
Scan again
Database closed

Test: lock
Database open in read/write mode
Database closed
Warning: Lock reset
Database open in read/write mode
Database closed
Error: Lock taken by process with pid 1
Error: Lock taken by an unidentified process!
Error: Lock taken by an unidentified process!

Test: read-only mode
Database open in read-only mode
Database closed

Test: fill in DB
Database open in read/write mode
Reading list of missing checksums
List created: myClient
Database open r/w: myClient
 /client_path/subdir
Adding compressed file data to DB for 285b35198a5e188b3a0df3ed33f93a26-0
 /client_path/subdir/testfile
 /client_path/subdir/testfile2
Adding file data to DB for d41d8cd98f00b204e9800998ecf8427e-0
 /client_path/test space
Adding file data to DB for 59ca0efa9f5633cb0371bbc0355478d8-0
 /client_path/testfile
 other_path/testdir
Adding file data to DB for 3d546a1ce46c6ae10ad34ab8a81c542e-0
 other_path/testfile
Database modified: myClient
Database closed: myClient
Database closed
[ 1] /client_path/subdir            d      0 755
[ 2] /client_path/subdir/testfile   f     12 644 285b35198a5e188b3a0df3ed33f93a26-0
[ 3] /client_path/subdir/testfile2  f     12 644 285b35198a5e188b3a0df3ed33f93a26-0
[ 4] /client_path/test space        f      0 644 d41d8cd98f00b204e9800998ecf8427e-0
[ 5] /client_path/testfile          f     13 750 59ca0efa9f5633cb0371bbc0355478d8-0
[ 6] other_path/testdir             d      0 755
[ 7] other_path/testfile            f 145408 644 3d546a1ce46c6ae10ad34ab8a81c542e-0

Test: do nothing
Database open in read/write mode
Database closed
[ 1] /client_path/subdir            d      0 755
[ 2] /client_path/subdir/testfile   f     12 644 285b35198a5e188b3a0df3ed33f93a26-0
[ 3] /client_path/subdir/testfile2  f     12 644 285b35198a5e188b3a0df3ed33f93a26-0
[ 4] /client_path/test space        f      0 644 d41d8cd98f00b204e9800998ecf8427e-0
[ 5] /client_path/testfile          f     13 750 59ca0efa9f5633cb0371bbc0355478d8-0
[ 6] other_path/testdir             d      0 755
[ 7] other_path/testfile            f 145408 644 3d546a1ce46c6ae10ad34ab8a81c542e-0

Test: read clients
Database open in read-only mode
Database closed
List of clients: 1
 -> myClient

Test: read paths in myClient
Database open in read-only mode
Database open r-o: myClient
Database closed: myClient
List of paths: 2
 -> /client_path
 -> other_path

Test: read paths in myClient below /client_path
Database open r-o: myClient
Database closed: myClient
List of paths: 3
 -> /client_path/subdir
 -> /client_path/test space
 -> /client_path/testfile

Test: read paths in myClient below other_path
Database open r-o: myClient
Database closed: myClient
List of paths: 2
 -> other_path/testdir
 -> other_path/testfile

Test: read paths in myClient below /client_path/subdir
Database open r-o: myClient
Database closed: myClient
List of paths: 2
 -> /client_path/subdir/testfile
 -> /client_path/subdir/testfile2
Database closed

Test: scan
Database open in read/write mode
Reading list: myClient
Found 4 checksums
Crawling through DB
285b35198a5e188b3a0df3ed33f93a26-0\r
3d546a1ce46c6ae10ad34ab8a81c542e-0\r
                                  \r
Error: 3d546a1ce46c6ae10ad34ab8a81c542e-0: Data missing
59ca0efa9f5633cb0371bbc0355478d8-0\r
6d7fce9fee471194aa8b5b6e47267f03-0\r
d41d8cd98f00b204e9800998ecf8427e-0\r
                                  \r
Found 4 valid and 1 broken data files
Checksum(s) from list:
 -> 285b35198a5e188b3a0df3ed33f93a26-0
 -> 3d546a1ce46c6ae10ad34ab8a81c542e-0
 -> 59ca0efa9f5633cb0371bbc0355478d8-0
 -> d41d8cd98f00b204e9800998ecf8427e-0
Checksum(s) with data:
 -> 285b35198a5e188b3a0df3ed33f93a26-0
 -> 59ca0efa9f5633cb0371bbc0355478d8-0
 -> 6d7fce9fee471194aa8b5b6e47267f03-0
 -> d41d8cd98f00b204e9800998ecf8427e-0
Obsolete checksum(s): 1
 -> 6d7fce9fee471194aa8b5b6e47267f03-0: removed
Warning: Missing checksum(s): 1
 -> 3d546a1ce46c6ae10ad34ab8a81c542e-0
Missing checksums list modified
List of missing checksums contains 1 item(s)
Database closed

Test: concurrent access
Database open in read/write mode
Database open in read-only mode
Database open r-o: myClient
Reading list of missing checksums
 -> 3d546a1ce46c6ae10ad34ab8a81c542e-0
Database open r/w: myClient
 /client_path/new_link
D       /client_path/subdir
D       /client_path/subdir/testfile
D       /client_path/subdir/testfile2
D       /client_path/test space
D       /client_path/testfile
D       other_path/testdir
D       other_path/testfile
Database modified: myClient
Database closed: myClient
Database closed: myClient
Database closed
List of missing checksums contains 1 item(s)
Database closed
[ 8] /client_path/new_link          l      8 777 testfile
[ 9] /client_path/subdir            [rm]
[11] /client_path/subdir/testfile   [rm]
[13] /client_path/subdir/testfile2  [rm]
[15] /client_path/test space        [rm]
[17] /client_path/testfile          [rm]
[19] other_path/testdir             [rm]
[21] other_path/testfile            [rm]
List of paths: 3
 -> /client_path/subdir
 -> /client_path/test space
 -> /client_path/testfile
Database open in read-only mode
Database open r-o: myClient
Database closed: myClient
Database closed
List of paths: 4
 -> /client_path/new_link
 -> /client_path/subdir
 -> /client_path/test space
 -> /client_path/testfile
Date: 0
Database open in read-only mode
Database open r-o: myClient
Database closed: myClient
Database closed
List of paths: 4
 -> /client_path/new_link
 -> /client_path/subdir
 -> /client_path/test space
 -> /client_path/testfile
Date: -8 from 22 (+1)
Database open in read-only mode
Database open r-o: myClient
Database closed: myClient
Database closed
List of paths: 3
 -> /client_path/new_link
 -> /client_path/subdir
 -> /client_path/test space
Date: 14
Database open in read-only mode
Database open r-o: myClient
Database closed: myClient
Database closed
List of paths: 2
 -> /client_path/new_link
 -> /client_path/subdir
