Database initialized
 -> Database open

Test: getdir
Check test_db/data dir: 0
febatest1 status: 0, getdir_path: test_db/data/fe/ba/test1
fe98test2 status: 0, getdir_path: test_db/data/fe/98/test2
fe98test3 status: 1, getdir_path: test_db/data/fe/98/test3
fetest4 status: 1, getdir_path: test_db/data/fe/te/st4
fedc76test5 status: 1, getdir_path: test_db/data/fe/dc/76/test5
fedc76test6 status: 1, getdir_path: test_db/data/fe/dc/76/test6
fedc76test6 status: 0, getdir_path: test_db/data/fe/dc/76/test6

Test: write and read back
Adding file data to DB in: test_db/data/59/ca0efa9f5633cb0371bbc0355478d8-0
59ca0efa9f5633cb0371bbc0355478d8-0  test1/testfile
59ca0efa9f5633cb0371bbc0355478d8-0  test_db/blah

Test: write and read back with compression
59ca0efa9f5633cb0371bbc0355478d8-0  test1/testfile
59ca0efa9f5633cb0371bbc0355478d8-0  test_db/blah

Test: check
db.check: Structure needs cleaning
db.check: Structure needs cleaning
db.check: Invalid argument
Scanning database contents thoroughly: 0 files
db.check: No such file or directory
db: check: data corrupted for 59ca0efa9f5633cb0371bbc0355478d8-0
db.check: Exec format error

Test: organise
Lesser:
test_db/data/zz:
000001

test_db/data/zz/000001:
Equal:
test_db/data/zz:
00
.nofiles

test_db/data/zz/00:
0001
0002

test_db/data/zz/00/0001:

test_db/data/zz/00/0002:
Greater:
test_db/data/zz:
00
.nofiles

test_db/data/zz/00:
00
.nofiles

test_db/data/zz/00/00:
01
02
03

test_db/data/zz/00/00/01:

test_db/data/zz/00/00/02:

test_db/data/zz/00/00/03:
 -> Journal is empty, not merging
 -> Database closed

Test: lock
 -> Database open
 -> Journal is empty, not merging
 -> Database closed
db: lock reset
 -> Database open
 -> Journal is empty, not merging
 -> Database closed
db: lock taken by process with pid 1
db: lock taken by an unidentified process!
db: lock taken by an unidentified process!

Test: read-only mode
 -> Database open
 -> Database closed

Test: fill in DB
 -> Database open
Adding file data to DB in: test_db/data/d4/1d8cd98f00b204e9800998ecf8427e-0
Adding file data to DB in: test_db/data/59/ca0efa9f5633cb0371bbc0355478d8-1
Adding file data to DB in: test_db/data/28/5b35198a5e188b3a0df3ed33f93a26-0
Adding file data to DB in: test_db/data/3d/546a1ce46c6ae10ad34ab8a81c542e-0
 -> Database closed
[ 1] prot://client    /client_path/test space            f     0 644 d41d8cd98f00b204e9800998ecf8427e-0
[ 2] prot://client    /client_path/testfile              f    13 644 59ca0efa9f5633cb0371bbc0355478d8-1
[ 3] prot://client    /client_path/subdir                d     0 755
[ 4] prot://client    /client_path/subdir/testfile       f    12 644 285b35198a5e188b3a0df3ed33f93a26-0
[ 5] prot://client    /client_path/subdir/testfile2      f    12 644 285b35198a5e188b3a0df3ed33f93a26-0
[ 6] prot://client    other_path/testfile                f 145408 644 3d546a1ce46c6ae10ad34ab8a81c542e-0
[ 7] prot://client    other_path/testdir                 d     0 755

Test: do nothing
 -> Database open
 -> Journal is empty, not merging
 -> Database closed
[ 1] prot://client    /client_path/test space            f     0 644 d41d8cd98f00b204e9800998ecf8427e-0
[ 2] prot://client    /client_path/testfile              f    13 644 59ca0efa9f5633cb0371bbc0355478d8-1
[ 3] prot://client    /client_path/subdir                d     0 755
[ 4] prot://client    /client_path/subdir/testfile       f    12 644 285b35198a5e188b3a0df3ed33f93a26-0
[ 5] prot://client    /client_path/subdir/testfile2      f    12 644 285b35198a5e188b3a0df3ed33f93a26-0
[ 6] prot://client    other_path/testfile                f 145408 644 3d546a1ce46c6ae10ad34ab8a81c542e-0
[ 7] prot://client    other_path/testdir                 d     0 755

Test: read clients
 -> Database open
 -> Database closed
List of clients: 1
 -> prot://client

Test: read paths in prot://client
 -> Database open
 -> Database closed
List of paths: 2
 -> /client_path
 -> other_path

Test: read paths in prot://client below /client_path
 -> Database open
 -> Database closed
List of paths: 3
 -> /client_path/test space
 -> /client_path/testfile
 -> /client_path/subdir

Test: read paths in prot://client below other_path
 -> Database open
 -> Database closed
List of paths: 2
 -> other_path/testfile
 -> other_path/testdir

Test: read paths in prot://client below /client_path/subdir
 -> Database open
 -> Database closed
List of paths: 2
 -> /client_path/subdir/testfile
 -> /client_path/subdir/testfile2

Test: crawl
 -> Database open
 -> 285b35198a5e188b3a0df3ed33f93a26-0
 -> 3d546a1ce46c6ae10ad34ab8a81c542e-0
 -> 59ca0efa9f5633cb0371bbc0355478d8-0
File data corrupted for 59ca0efa9f5633cb0371bbc0355478d8-0, removed
 -> 59ca0efa9f5633cb0371bbc0355478d8-1
 -> d41d8cd98f00b204e9800998ecf8427e-0
 -> fe98test2
File data missing for fe98test2
 -> febatest1
File data missing for febatest1
 -> fedc76test6
File data missing for fedc76test6
 -> zz000001
File data missing for zz000001
 -> zz000002
File data missing for zz000002
 -> zz000003
File data missing for zz000003
 -> Journal is empty, not merging
 -> Database closed
