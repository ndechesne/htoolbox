Tools Test
Our mask = 0022

Test: constructors / countBlocks
0: 
blocks separated by '/'s: 0
blocks separated by '1's: 0
blocks separated by '5's: 0
blocks separated by '9's: 0
0: 
blocks separated by '/'s: 0
blocks separated by '1's: 0
blocks separated by '5's: 0
blocks separated by '9's: 0
3: 123
blocks separated by '/'s: 1
blocks separated by '1's: 1
blocks separated by '5's: 1
blocks separated by '9's: 1
7: 123/456
blocks separated by '/'s: 2
blocks separated by '1's: 1
blocks separated by '5's: 2
blocks separated by '9's: 1
3: 789
blocks separated by '/'s: 1
blocks separated by '1's: 1
blocks separated by '5's: 1
blocks separated by '9's: 1
11: 123/456/789
blocks separated by '/'s: 3
blocks separated by '1's: 1
blocks separated by '5's: 2
blocks separated by '9's: 1
15: 123/456/789/159
blocks separated by '/'s: 4
blocks separated by '1's: 2
blocks separated by '5's: 3
blocks separated by '9's: 2
25: //1123//456/7899//11599//
blocks separated by '/'s: 4
blocks separated by '1's: 3
blocks separated by '5's: 3
blocks separated by '9's: 3

Test: basename and dirname
this/is a path/to a/file -> base: file, dir: this/is a path/to a
this is a file -> base: this is a file, dir: .
this is a path/ -> base: , dir: this is a path

Test: fromDos
a:\backup\ -> A:/backup/
z:/backup -> z:/backup
1:/backup -> 1:/backup
f;/backup -> f;/backup
l:|backup -> l:|backup
this\is a path/ Unix\ cannot cope with/\ -> this/is a path/ Unix/ cannot cope with//
this/is a path/ Unix/ cannot cope with// -> this/is a path/ Unix/ cannot cope with//

Test: noTrailingSlashes
this/is a path/ Unix/ cannot cope with// -> this/is a path/ Unix/ cannot cope with
this/is a path/ Unix/ cannot cope with -> this/is a path/ Unix/ cannot cope with
 -> 
/ -> 

Test: compare
a <> a: 0
a <> b: -1
b <> a: 1
a1 <> b: -1
b <> a1: 1
a1 <> a: 1
a <> a1: -1
a/ <> a: 1
a <> a/: -1
a	 <> a/: -1
a/ <> a	 1
a	 <> a	 0
a
 <> a/: -1
a/ <> a
 1
a
 <> a
 0
a/ <> a.: -1
a. <> a/: 1
a/ <> a-: -1
a- <> a/: 1
a/ <> a/: 0
abcd <> abce, 3: 0
abcd <> abce, 4: -1
abcd <> abce, 5: -1

Test: file read (no cache)
Progress:   3.9%
Progress:   7.8%
Progress:  11.7%
Progress:  15.6%
Progress:  19.5%
Progress:  23.4%
Progress:  27.3%
Progress:  31.2%
Progress:  35.2%
Progress:  39.1%
Progress:  43.0%
Progress:  46.9%
Progress:  50.8%
Progress:  54.7%
Progress:  58.6%
Progress:  62.5%
Progress:  66.4%
Progress:  70.3%
Progress:  74.2%
Progress:  78.1%
Progress:  82.0%
Progress:  85.9%
Progress:  89.8%
Progress:  93.8%
Progress:  97.7%
Progress: 100.0%
read size: 10485760 (10485760), checksum: f1c9645dbc14efddc7d8a322685f26eb

Test: file write (with cache)
Progress: 100.0%
write size: 12 (12), checksum: a0c5dee7d6c447468bcb866b0d3210e6
123abc
line

Test: file copy (read + write (no cache))
Progress:   3.9%
Progress:   7.8%
Progress:  11.7%
Progress:  15.6%
Progress:  19.5%
Progress:  23.4%
Progress:  27.3%
Progress:  31.2%
Progress:  35.2%
Progress:  39.1%
Progress:  43.0%
Progress:  46.9%
Progress:  50.8%
Progress:  54.7%
Progress:  58.6%
Progress:  62.5%
Progress:  66.4%
Progress:  70.3%
Progress:  74.2%
Progress:  78.1%
Progress:  82.0%
Progress:  85.9%
Progress:  89.8%
Progress:  93.8%
Progress:  97.7%
Progress: 100.0%
read size: 10485760 (10485760), checksum: f1c9645dbc14efddc7d8a322685f26eb
write size: 10485760 (10485760), checksum: f1c9645dbc14efddc7d8a322685f26eb

Test: file compress (read + compress write), with last zero-size write call
read size: 10485760 (10485760), checksum: f1c9645dbc14efddc7d8a322685f26eb
write size (wrong): 8214 (10208), checksum: b7350db49d036137b2ef752a82145e91

Test: file uncompress (uncompress read + write)
read size: 10485760 (10208), checksum: b7350db49d036137b2ef752a82145e91
write size: 10485760 (10485760), checksum: f1c9645dbc14efddc7d8a322685f26eb

Test: file compress (read + compress write)
read size: 10485760 (10485760), checksum: f1c9645dbc14efddc7d8a322685f26eb
write size (wrong): 8214 (10208), checksum: b7350db49d036137b2ef752a82145e91

Test: file recompress (uncompress read + compress write), no closing
read size: 10485760 (10208), checksum: b7350db49d036137b2ef752a82145e91
write size (wrong): 8214 (10208), checksum: b7350db49d036137b2ef752a82145e91

Test: file compare (both compressed)
  whole files
files are equal
  exact size
files are equal
  first 2000 bytes
files are equal
  first 100 bytes
files are equal

Test: file compare (one compressed)
  whole files
files differ
  exact size
files differ
  first 2000 bytes
files differ
  first 100 bytes
files differ

Test: computeChecksum
Progress: 100.0%
Checksum: 59ca0efa9f5633cb0371bbc0355478d8

Test: copy
checksum in: b7350db49d036137b2ef752a82145e91
checksum out: f1c9645dbc14efddc7d8a322685f26eb

Test: interrupted copy
Error copying file: Operation canceled

Test: getLine
Reading empty file:
Reading uncompressed file:
Line: abcdef
Line: ghi
Reading compressed file:
Line: abcdef
Line: ghi
Reading compressed file (line length = 600):
Line: 123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890
Line: 123456789

extractParams
readline(a): 0
a

readline( 	a 	b): 0
a
b

readline(	 ab): 0
ab

readline(	 ab cd): 0
ab
cd

readline(	 ab cd	ef # blah): 0
ab
cd
ef

readline(	 'ab' 'cd'	'ef' # blah): 0
ab
cd
ef

readline(	 "ab" 'cd'	"ef" # blah): 0
ab
cd
ef

readline(	 ab cd	ef 'gh ij	kl' "mn op	qr" 	# blah): 0
ab
cd
ef
gh ij	kl
mn op	qr

readline(	 ab cd	ef 'gh "ij\'	kl' "mn 'op\"	qr" 	# blah): 0
ab
cd
ef
gh "ij'	kl
mn 'op"	qr

readline(	 a\b cd	ef 'g\h "ij\'	kl' "m\n 'op\"	qr" 	# blah): 0
a\b
cd
ef
g\h "ij'	kl
m\n 'op"	qr

readline(	 a\b cd	ef 'g\h "ij\'	kl): 1
a\b
cd
ef
g\h "ij'	kl

readline(	 a\b cd	ef 'g\h "ij\'	kl' "m\n 'op\"	qr): 1
a\b
cd
ef
g\h "ij'	kl
m\n 'op"	qr

readline(path "C:\Backup\"): 1
path
C:\Backup"

readline(path "C:\Backup\"): 0
path
C:\Backup\

readline(path "C:\Backup\"): 0
path
C:\Backup\

readline( this is a path "C:\Backup"   and  spaces matter ): 0

this
is
a
path
C:\Backup



and

spaces
matter


readline( this is a path "C:\Backup"   and  spaces matter ): 0

this
is
a
path

readline(		f	blah	''): 0


f
blah


readline(		f	blah	'): 1


f
blah


readline(		f	blah		): 0


f
blah




File types
Name: testfile, path = test1/testfile, type = f, mtime = 1, size = 13, uid = 1, gid = 1, mode = 644
Name: testlink, path = test1/testlink, type = l, mtime = 1, size = 8, uid = 1, gid = 1, mode = 777, link = testfile
 > Dir.: testdir, path = test1/testdir, type = d, mtime = 1, size = 1, uid = 1, gid = 1, mode = 755
 > Dir.: subdir, path = test1/subdir, type = d, mtime = 1, size = 1, uid = 1, gid = 1, mode = 755
 -> Oth.: testfile, path = test1/subdir/testfile, type = f, mtime = 1, size = 12, uid = 1, gid = 1, mode = 644
 -> Oth.: testfile1, path = test1/subdir/testfile1, type = f, mtime = 1, size = 0, uid = 1, gid = 1, mode = 644
 -> Oth.: testfile2, path = test1/subdir/testfile2, type = f, mtime = 1, size = 12, uid = 1, gid = 1, mode = 644

Validity tests
File is file? 1
File is dir? 0
File is link? 0
Dir is file? 0
Dir is dir? 1
Dir is link? 0
Link is file? 0
Link is dir? 0
Link is link? 1

Creation tests
File is file? 0
File is dir? 0
File is link? 0
Dir is file? 0
Dir is dir? 0
Dir is link? 0
Link is file? 0
Link is dir? 0
Link is link? 0
Create
File is file? 1
File is dir? 0
File is link? 0
Dir is file? 0
Dir is dir? 1
Dir is link? 0
Link is file? 0
Link is dir? 0
Link is link? 0
Create again
File is file? 1
File is dir? 0
File is link? 0
Dir is file? 0
Dir is dir? 1
Dir is link? 0
Link is file? 0
Link is dir? 0
Link is link? 0

Parsing test
 > Dir.: test1, path = test1, type = d, mtime = 1, size = 1, uid = 1, gid = 1, mode = 755
 -> Dir.: dir space, path = test1/dir space, type = d, mtime = 1, size = 1, uid = 1, gid = 1, mode = 755
 --> File: file space, path = test1/dir space/file space, type = f, mtime = 1, size = 0, uid = 1, gid = 1, mode = 644
 -> File: rwfile_dest, path = test1/rwfile_dest, type = f, mtime = 1, size = 409600, uid = 1, gid = 1, mode = 644
 -> File: rwfile_source, path = test1/rwfile_source, type = f, mtime = 1, size = 10208, uid = 1, gid = 1, mode = 644
 -> Dir.: subdir, path = test1/subdir, type = d, mtime = 1, size = 1, uid = 1, gid = 1, mode = 755
 --> File: testfile, path = test1/subdir/testfile, type = f, mtime = 1, size = 12, uid = 1, gid = 1, mode = 644
 --> File: testfile1, path = test1/subdir/testfile1, type = f, mtime = 1, size = 0, uid = 1, gid = 1, mode = 644
 --> File: testfile2, path = test1/subdir/testfile2, type = f, mtime = 1, size = 12, uid = 1, gid = 1, mode = 644
 -> File: test space, path = test1/test space, type = f, mtime = 1, size = 0, uid = 1, gid = 1, mode = 644
 -> Dir.: testdir, path = test1/testdir, type = d, mtime = 1, size = 1, uid = 1, gid = 1, mode = 755
 -> File: testfile, path = test1/testfile, type = f, mtime = 1, size = 13, uid = 1, gid = 1, mode = 644
 -> File: testfile~, path = test1/testfile~, type = f, mtime = 1, size = 0, uid = 1, gid = 1, mode = 644
 -> Link: testlink, path = test1/testlink, type = l, mtime = 1, size = 8, uid = 1, gid = 1, mode = 777, link = testfile
 -> Oth.: testpipe, path = test1/testpipe, type = p, mtime = 1, size = 0, uid = 1, gid = 1, mode = 644
 -> Dir.: toucheddir, path = test1/toucheddir, type = d, mtime = 1, size = 1, uid = 1, gid = 1, mode = 755
 -> File: touchedfile, path = test1/touchedfile, type = f, mtime = 1, size = 0, uid = 1, gid = 1, mode = 644

Difference test
f1 and f2 are identical
f1 and f2 differ
f1 and f2 differ
f1 and f2 differ
f1 and f2 differ
f1 and f2 differ
f1 and f2 differ
f1 and f2 differ
l1 and l2 are identical
l1 and l2 differ
l1 and l2 differ

getParams
db	test_db	
trash	1	
	
filter	all	backup	
condition	type	file	
condition	path_end	~	

filter	any	test_or	
condition	filter	backup	
condition	!size<	1000	

client	nfs	myClient	
hostname	myClient	
config	/home/User/hbackup.list	

client	ssh	other	
hostname	otherClient	
config	/home/backup/Backup.list	

client	file	myhost	
hostname	myhost.mynetwork.lan	
config	etc/localhost.list	
expire	1	

client	smb	client	
option	username	Myself	
option	password	flesyM	
option	nocase	
hostname	myClient	
config	C:\Backup\Backup.LST	

Stream select
Not found.
Found (1): data.gz
Found (0): data

End of tests
