Tools Test
Our mask = 0022

Test: constructors
0: 
0: 
3: 123
7: 123/456
4: /789
11: 123/456/789
15: 123/456/789/159
25: //1123//456/7899//11599//

Test: basename and dirname
this/is a path/to a/file -> base: file, dir: this/is a path/to a
this is a file -> base: this is a file, dir: .
this is a path/ -> base: , dir: this is a path

Test: fromDos
a:\backup\ -> A:/backup/
z:/backup -> z:/backup
1:/backup -> 1:/backup
f;/backup -> f;/backup
l:|backup -> l:|backup
this\is a path/ Unix\ cannot cope with/\ -> this/is a path/ Unix/ cannot cope with//
this/is a path/ Unix/ cannot cope with// -> this/is a path/ Unix/ cannot cope with//

Test: noTrailingSlashes
this/is a path/ Unix/ cannot cope with// -> this/is a path/ Unix/ cannot cope with
this/is a path/ Unix/ cannot cope with -> this/is a path/ Unix/ cannot cope with
 -> 
/ -> 

Test: compare
a <> a: 0
a <> b: -1
b <> a: 1
a1 <> b: -1
b <> a1: 1
a1 <> a: 1
a <> a1: -1
a/ <> a: 1
a <> a/: -1
a	 <> a/: -1
a/ <> a	 1
a	 <> a	 0
a
 <> a/: -1
a/ <> a
 1
a
 <> a
 0
a/ <> a.: -1
a. <> a/: 1
a/ <> a-: -1
a- <> a/: 1
a/ <> a/: 0
abcd <> abce, 3: 0
abcd <> abce, 4: -1
abcd <> abce, 5: -1

Test: file read (no cache)
Done:  10.0%
Done:  20.0%
Done:  30.0%
Done:  40.0%
Done:  50.0%
Done:  60.0%
Done:  70.0%
Done:  80.0%
Done:  90.0%
Done: 100.0%
read size: 10485760 (10485760, 10485760), checksum: f1c9645dbc14efddc7d8a322685f26eb

Test: file write
Done:  3
Done:  7
Done: 11
Done: 12
Done: 31
Done: 32
write size: 32 (32, 32), checksum: dabae94f9178f07f6e03ae89fd827c82
123abc
line
this is a long line

Test: file copy (read (cache) + write (no cache))
Done:   4.9%
Done:   9.8%
Done:  14.6%
Done:  19.5%
Done:  24.4%
Done:  29.3%
Done:  34.2%
Done:  39.1%
Done:  43.9%
Done:  48.8%
Done:  53.7%
Done:  58.6%
Done:  63.5%
Done:  68.4%
Done:  73.2%
Done:  78.1%
Done:  83.0%
Done:  87.9%
Done:  92.8%
Done:  97.7%
Done: 100.0%
read size: 10485760 (10485760, 10485760), checksum: f1c9645dbc14efddc7d8a322685f26eb
write size: 10485760 (10485760, 10485760), checksum: f1c9645dbc14efddc7d8a322685f26eb

Test: file compress (read + default compress write), with last zero-size write call
read size: 10485760 (10485760, 10485760), checksum: f1c9645dbc14efddc7d8a322685f26eb
write size: 10485760 (10208, 10485760), checksum: b7350db49d036137b2ef752a82145e91

Test: file uncompress (uncompress read + write)
read size: 10485760 (10208, 10485760), checksum: f1c9645dbc14efddc7d8a322685f26eb
write size: 10485760 (10485760, 10485760), checksum: f1c9645dbc14efddc7d8a322685f26eb

Test: file compress (read + compress write)
read size: 10485760 (10485760, 10485760), checksum: f1c9645dbc14efddc7d8a322685f26eb
write size: 10485760 (10208, 10485760), checksum: b7350db49d036137b2ef752a82145e91

Test: file recompress (uncompress read + compress write)
read size: 10485760 (10208, 10485760), checksum: f1c9645dbc14efddc7d8a322685f26eb
write size: 10485760 (10208, 10485760), checksum: b7350db49d036137b2ef752a82145e91

Test: file compare (both compressed)
  whole files
files are equal
  exact size
files are equal
  first 2000 bytes
files are equal
  first 100 bytes
files are equal

Test: file compare (one compressed)
  whole files
files differ
  exact size
files differ
  first 2000 bytes
files differ
  first 100 bytes
files differ

Test: computeChecksum
default read
Checksum: 59ca0efa9f5633cb0371bbc0355478d8
Data size: 13
default read
Done:  70.4%
Done: 100.0%
Checksum: f81f70dceaca8b0cec354f33fa3f0909
Data size: 145461
default decompress read
Checksum: 81db27b3763d3c48ea035c54b8ebeaa3
Data size: 145408
default getLine
Done:  70.4%
Done: 100.0%
Checksum: f81f70dceaca8b0cec354f33fa3f0909
Size: 145461
default decompress getLine
Checksum: 81db27b3763d3c48ea035c54b8ebeaa3
Size: 145408
default decompress read
Checksum: f1c9645dbc14efddc7d8a322685f26eb
Data size: 10485760

Test: copy
checksum in: f1c9645dbc14efddc7d8a322685f26eb
checksum out: f1c9645dbc14efddc7d8a322685f26eb
size in: 10208
size out: 10485760
checksum in: f1c9645dbc14efddc7d8a322685f26eb
checksum out: f1c9645dbc14efddc7d8a322685f26eb
size in: 10485760
size out: 10485760
checksum in: f1c9645dbc14efddc7d8a322685f26eb
checksum out: b7350db49d036137b2ef752a82145e91
size in: 10485760
size out: 10208

Test: interrupted copy
Error copying file: Operation canceled

Test: double copy
checksum in: f1c9645dbc14efddc7d8a322685f26eb
checksum out: b7350db49d036137b2ef752a82145e91
checksum out 2: b7350db49d036137b2ef752a82145e91
data in: 10485760
data out: 10485760
data out 2: 10485760
file out: 10208
file out 2: 10208

Test: getLine
Checksum: d41d8cd98f00b204e9800998ecf8427e
Reading empty file:
Checksum: d41d8cd98f00b204e9800998ecf8427e
Checksum: caf39f98439e467d895585e0740f015e
Reading uncompressed file:
Line: abcdef
Line: ghi
Checksum: caf39f98439e467d895585e0740f015e
Checksum: 6bb64092bb3d5dc7d3b2d4932f77199e
Reading compressed file:
Line: abcdef
Line: ghi
Checksum: caf39f98439e467d895585e0740f015e
Checksum: c118d6329b1675a9a72c296c2c58f0f4
Reading compressed file (line length = 600):
Line: 123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890
Line: 123456789
Checksum: 56a8cc63a390016b292f117c17addb5c
Reading compressed file (line length = 600), no checksum:
Line: 123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890
Line: 123456789
Checksum: 

File types
Name: testfile, path = test1/testfile, type = f, mtime = 1, size = 13, uid = 1, gid = 1, mode = 750
Name: testlink, path = test1/testlink, type = l, mtime = 1, size = 8, uid = 1, gid = 1, mode = 777, link = testfile
 > Dir.: testdir, path = test1/testdir, type = d, mtime = 1, size = 1, uid = 1, gid = 1, mode = 755
 > Dir.: subdir, path = test1/subdir, type = d, mtime = 1, size = 1, uid = 1, gid = 1, mode = 755
 -> File: testfile, path = test1/subdir/testfile, type = f, mtime = 1, size = 12, uid = 1, gid = 1, mode = 644
 -> File: testfile1, path = test1/subdir/testfile1, type = f, mtime = 1, size = 0, uid = 1, gid = 1, mode = 644
 -> File: testfile2, path = test1/subdir/testfile2, type = f, mtime = 1, size = 12, uid = 1, gid = 1, mode = 644

Link change
 -> Link: testlink, path = test1/testlink, type = l, mtime = 1, size = 8, uid = 1, gid = 1, mode = 777, link = testfile
 -> Link: testlink, path = test1/testlink, type = l, mtime = 1, size = 8, uid = 1, gid = 1, mode = 777, link = ???????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????

Validity tests
File is file? 1
File is dir? 0
File is link? 0
Dir is file? 0
Dir is dir? 1
Dir is link? 0
Link is file? 0
Link is dir? 0
Link is link? 1

Creation tests
File is file? 0
File is dir? 0
File is link? 0
Dir is file? 0
Dir is dir? 0
Dir is link? 0
Link is file? 0
Link is dir? 0
Link is link? 0
Create
File is file? 1
File is dir? 0
File is link? 0
Dir is file? 0
Dir is dir? 1
Dir is link? 0
Link is file? 0
Link is dir? 0
Link is link? 0
Create again
failed to create file: File exists
failed to create dir: File exists
File is file? 1
File is dir? 0
File is link? 0
Dir is file? 0
Dir is dir? 1
Dir is link? 0
Link is file? 0
Link is dir? 0
Link is link? 0

Parsing test
 > Dir.: test1, path = test1, type = d, mtime = 1, size = 1, uid = 1, gid = 1, mode = 755
 -> File: big_file, path = test1/big_file, type = f, mtime = 1, size = 10485760, uid = 1, gid = 1, mode = 644
 -> Dir.: dir space, path = test1/dir space, type = d, mtime = 1, size = 1, uid = 1, gid = 1, mode = 755
 --> File: file space, path = test1/dir space/file space, type = f, mtime = 1, size = 0, uid = 1, gid = 1, mode = 644
 --> Link: link space, path = test1/dir space/link space, type = l, mtime = 1, size = 12, uid = 1, gid = 1, mode = 777, link = linked space
 -> Link: longlink, path = test1/longlink, type = l, mtime = 1, size = 270, uid = 1, gid = 1, mode = 777, link = 123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890
 -> File: rwfile_source, path = test1/rwfile_source, type = f, mtime = 1, size = 10208, uid = 1, gid = 1, mode = 644
 -> File: strange1TAB	CR\r
, path = test1/strange1TAB	CR\r
, type = f, mtime = 1, size = 0, uid = 1, gid = 1, mode = 644
 -> File: strange2TAB	LF, path = test1/strange2TAB	LF, type = f, mtime = 1, size = 0, uid = 1, gid = 1, mode = 644
 -> File: strange3TAB	LF
CR\r
, path = test1/strange3TAB	LF
CR\r
, type = f, mtime = 1, size = 0, uid = 1, gid = 1, mode = 644
 -> Dir.: subdir, path = test1/subdir, type = d, mtime = 1, size = 1, uid = 1, gid = 1, mode = 755
 --> File: testfile, path = test1/subdir/testfile, type = f, mtime = 1, size = 12, uid = 1, gid = 1, mode = 644
 --> File: testfile1, path = test1/subdir/testfile1, type = f, mtime = 1, size = 0, uid = 1, gid = 1, mode = 644
 --> File: testfile2, path = test1/subdir/testfile2, type = f, mtime = 1, size = 12, uid = 1, gid = 1, mode = 644
 -> File: test space, path = test1/test space, type = f, mtime = 1, size = 0, uid = 1, gid = 1, mode = 644
 -> Dir.: testdir, path = test1/testdir, type = d, mtime = 1, size = 1, uid = 1, gid = 1, mode = 755
 -> File: testfile, path = test1/testfile, type = f, mtime = 1, size = 13, uid = 1, gid = 1, mode = 750
 -> File: testfile~, path = test1/testfile~, type = f, mtime = 1, size = 0, uid = 1, gid = 1, mode = 644
 -> Link: testlink, path = test1/testlink, type = l, mtime = 1, size = 8, uid = 1, gid = 1, mode = 777, link = testfile
 -> Oth.: testpipe, path = test1/testpipe, type = p, mtime = 1, size = 0, uid = 1, gid = 1, mode = 600
 -> Dir.: toucheddir, path = test1/toucheddir, type = d, mtime = 1, size = 1, uid = 1, gid = 1, mode = 755
 -> File: touchedfile, path = test1/touchedfile, type = f, mtime = 1, size = 0, uid = 1, gid = 1, mode = 644

Difference test
f1 and f2 are identical
f1 and f2 differ
f1 and f2 differ
f1 and f2 differ
f1 and f2 differ
f1 and f2 differ
f1 and f2 differ
f1 and f2 differ
l1 and l2 are identical
l1 and l2 differ
l1 and l2 differ

Stacking read/writers test
read 13 bytes: 'Hello world!
'
checksum = '59ca0efa9f5633cb0371bbc0355478d8'
written 13 bytes
checksum = '59ca0efa9f5633cb0371bbc0355478d8'
read 13 bytes: 'Hello world!
'
read 13 bytes: 'Hello world!
'
written 13 bytes
Hello world!

End of tests
